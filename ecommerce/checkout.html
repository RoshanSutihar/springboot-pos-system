<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Checkout</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
</head>
<body>

<div class="container mt-5">
    <h1 class="text-center mb-5">Checkout</h1>

    <div class="mb-3">
        <h2>Cart Items</h2>
        <ul id="cart-items" class="list-group mb-3"></ul>
        <p><strong>Total:</strong> $<span id="total-price">0.00</span></p>
    </div>

    <form id="checkout-form">
        <h2>Shipping Information</h2>
        <div class="form-group">
            <label for="name">Name</label>
            <input type="text" class="form-control" id="name" required>
        </div>
        <div class="form-group">
            <label for="address">Address</label>
            <input type="text" class="form-control" id="address" required>
        </div>
        <div class="form-group">
            <label for="phone">Phone Number</label>
            <input type="tel" class="form-control" id="phone" required>
        </div>

        <h2>Payment Details</h2>
        <div class="form-group">
            <label for="card-number">Card Number</label>
            <input type="text" class="form-control" id="card-number" required>
        </div>
        <div class="form-group">
            <label for="expiry-date">Expiry Date</label>
            <input type="text" class="form-control" id="expiry-date" placeholder="MM/YY" required>
        </div>
        <div class="form-group">
            <label for="cvv">CVV</label>
            <input type="text" class="form-control" id="cvv" required>
        </div>

        <button type="button" class="btn btn-success" onclick="completePurchase()">Complete Purchase</button>
        <button type="button" class="btn btn-secondary" onclick="continueShopping()">Continue Shopping</button>
    </form>
</div>

<script>
    // Load cart from session storage
    function loadCart() {
        const cartItems = document.getElementById('cart-items');
        const totalPriceElement = document.getElementById('total-price');
        const cart = JSON.parse(sessionStorage.getItem('cart')) || [];
        cartItems.innerHTML = '';
        let totalPrice = 0;
        cart.forEach(item => {
            totalPrice += item.price * item.quantity;
            const cartItem = `
                <li class="list-group-item d-flex justify-content-between align-items-center">
                    ${item.name} (x${item.quantity})
                    <span>$${(item.price * item.quantity).toFixed(2)}</span>
                    <button class="btn btn-danger btn-sm" onclick="removeFromCart(${item.id})">Remove</button>
                </li>`;
            cartItems.insertAdjacentHTML('beforeend', cartItem);
        });
        totalPriceElement.textContent = totalPrice.toFixed(2);
    }

    // Remove product from cart
    function removeFromCart(productId) {
        let cart = JSON.parse(sessionStorage.getItem('cart')) || [];
        cart = cart.filter(item => item.id !== productId);
        sessionStorage.setItem('cart', JSON.stringify(cart));
        loadCart();
    }

    // Complete purchase function (placeholder)
    function completePurchase() {
        const form = document.getElementById('checkout-form');
        if (form.checkValidity()) {
            alert("Purchase completed! Thank you for your order.");
            sessionStorage.removeItem('cart');
            loadCart();
            form.reset();
        } else {
            alert("Please fill out all required fields.");
        }
    }

    // Continue shopping function
    function continueShopping() {
        window.location.href = 'dashboard.html';
    }

    // Load cart on page load
    document.addEventListener('DOMContentLoaded', loadCart);
</script>
</body>
</html>
